define(["exports","./hpbar.js","./playerSkins.js"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Player=void 0;a.Player=class{constructor(a,b){this.scene=a,this.ownedSkins=[{name:"Lumbercwel 1",color:15348431},{name:"Lumbercwel 2",cost:2e3,color:3386060}],this.currentSkin=this.ownedSkins[0];new c.PlayerSkins(a);this.rectangle=this.scene.add.rectangle(150,850,82,128,this.currentSkin.color),this.score=0,this.highScore=parseInt(localStorage.getItem("highscore"))||0,this.world=b,this.alive=!0,this.coins=parseInt(localStorage.getItem("coins"))||0,this.hp=100,this.maxHp=this.hp,this.baseHpStep=.5,this.hpStep=.5,this.hpBarBg=a.add.rectangle(a.sys.game.config.width/2-102,38,204,34,3355443).setOrigin(0),this.hpBar=a.add.rectangle(a.sys.game.config.width/2-100,40,200,30,16711680).setOrigin(0),this.hpText=a.add.text(a.sys.game.config.width/2,56,"Hp: 100").setOrigin(.5)}create(){var a=this;this.tajmer=this.scene.time.addEvent({delay:50,loop:!0,callback:a.tajm,callbackScope:a}),this.increaseStepTimer=this.scene.time.addEvent({delay:5e3,loop:!0,callback:a.increaseStep,callbackScope:a}),this.scoreText=this.scene.add.text(0,0,"Score: ".concat(this.score,"\nHigh score: ").concat(this.highScore),{color:"#eaeaea"}).setOrigin(0);var a=this;window.tap=function(b){a.tap(b)}}tajm(){0<this.hp&&(this.hp-=this.hpStep/2),100<this.hp&&(this.hp=100),.5>=this.hp&&(this.hp=0),this.hpBar.width=2*this.hp,this.hpText.text="Hp: ".concat(Math.round(this.hp),"/").concat(this.maxHp)}increaseStep(){this.hpStep+=.1}tap(a){this.alive&&("left"==a?(this.rectangle.x=150,0<this.world.branches.length&&("left"==this.world.branches[0].side&&4==this.world.branches[0].level?this.die():4==this.world.branches[0].level&&"right"==this.world.branches[0].side&&(this.addPoint(),this.restoreHp()))):(this.rectangle.x=this.scene.sys.game.config.width-150,0<this.world.branches.length&&("right"==this.world.branches[0].side&&4==this.world.branches[0].level?this.die():4==this.world.branches[0].level&&"left"==this.world.branches[0].side&&(this.addPoint(),this.restoreHp()))),this.world.move()),this.scoreText.text="Score: ".concat(this.score,"\nHigh score: ").concat(this.highScore)}die(){var a=this;console.log("you lost"),this.scene.cameras.main.shake(50,.03),this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("highscore",this.highScore)),this.coins+=this.score,localStorage.setItem("coins",this.coins),this.alive=!1,setTimeout(()=>{a.world.branches.forEach(a=>{a.rectangle.destroy()}),a.world.branches=[],a.scene.scene.pause("mainScene"),a.scene.scene.launch("menuScene",{admin:"adam"})},100)}addPoint(){this.score++}restoreHp(){0<this.hp&&(this.hp+=5)}}});